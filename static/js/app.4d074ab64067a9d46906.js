webpackJsonp([1],{MXkr:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("MXkr");var a=s("7+uW"),i=s("Xxa5"),r=s.n(i),n=s("exGp"),o=s.n(n),c={name:"App",created:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchUserData");case 2:case"end":return t.stop()}},t,e)}))()}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"wrap flex-container flex-center-sort"},[t("router-view")],1)])},staticRenderFns:[]},d=s("VU/8")(c,m,!1,null,null,null).exports,g=s("/ocq"),l=s("Dd8w"),u=s.n(l),p=s("NYxO"),f=function(e){var t=new Date(parseInt(e,10)),s=(new Date).getTime(),a=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),n=t.getDay(),o=t.getHours(),c=t.getMinutes(),m=o<10?"0"+o:""+o,d=c<10?"0"+c:""+c,g=s-e;return g<864e5?m+":"+d:g<6048e5?["일요일","월요일","화요일","수요일","목요일","금요일","토요일"][n]+" "+m+":"+d:g<290304e5?i+"월 "+r+"일 "+m+":"+d:a+"."+i+"."+r+" "+m+":"+d},h={name:"RoomList",props:{room:{type:Object}},computed:{currentTimestamp:function(){return f(this.room.currentTimestamp)}}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{staticClass:"room-list-wrap flex-container flex-between-sort flex-row",attrs:{tag:"div",to:{name:"ChatRoom",params:{id:e.room.id,room:e.room}}}},[s("div",{staticClass:"profile-image-wrap"},[s("img",{staticClass:"profile-image",attrs:{src:e.room.imagePath,alt:"room-profile"}})]),e._v(" "),s("div",{staticClass:"chat-preview-wrap flex-container flex-column"},[s("div",{staticClass:"current-time-wrap"},[s("span",{staticClass:"current-time"},[e._v(e._s(e.currentTimestamp))])]),e._v(" "),s("div",{staticClass:"username-wrap"},[s("span",{staticClass:"username"},[e._v(e._s(e.room.username))])]),e._v(" "),s("div",{staticClass:"current-message-wrap flex-container flex-v-center"},[s("span",{staticClass:"current-message"},[e._v(e._s(e.room.currentMessage))])])])])},staticRenderFns:[]},v={name:"ChatListPage",components:{RoomList:s("VU/8")(h,_,!1,null,null,null).exports},created:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFriendList();case 2:case"end":return t.stop()}},t,e)}))()},computed:u()({},Object(p.c)(["getFriendLists"])),methods:u()({},Object(p.b)(["fetchFriendList"]))},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat-list-page page"},[this._m(0),this._v(" "),this._m(1),this._v(" "),t("div",{staticClass:"room-lists-wrap"},this._l(this.getFriendLists,function(e,s){return t("room-list",{key:s,attrs:{room:e}})}))])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main-title-wrap"},[t("div",{staticClass:"main-title"},[this._v("CHAT")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"new-message-wrap"},[t("div",{staticClass:"new-message"},[this._v("+ New Message")])])}]},C=s("VU/8")(v,T,!1,null,null,null).exports,M={name:"ChatMessage",props:{messageData:{type:Object}},computed:u()({},Object(p.c)(["getOtherProfilePath","getMyProfilePath"]),{align:function(){return{"flex-align-left":!this.messageData.isMe,"flex-align-right":this.messageData.isMe}},getTimestamp:function(){return f(this.messageData.created_at)}})},E={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chit-chat-wrap flex-container",class:e.align},[s("div",{staticClass:"profile-icon-wrap",class:e.messageData.isMe?"profile-align-right":"profile-align-left"},[s("img",{staticClass:"profile-icon",attrs:{src:e.messageData.isMe?e.getMyProfilePath:e.getOtherProfilePath,alt:"profile-icon"}})]),e._v(" "),s("div",{staticClass:"message-box"},[s("p",{staticClass:"message-text"},[e._v(e._s(e.messageData.message))])]),e._v(" "),s("div",{staticClass:"timestamp-wrap flex-align-bottom"},[s("span",{staticClass:"timestamp"},[e._v(e._s(e.getTimestamp))])])])},staticRenderFns:[]},P={name:"ChatRoomPage",components:{ChatMessage:s("VU/8")(M,E,!1,null,null,null).exports},props:{id:{type:Number},room:{type:Object}},created:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchChatData(e.id);case 2:e.autoScroll();case 3:case"end":return t.stop()}},t,e)}))()},updated:function(){this.autoScroll()},computed:u()({},Object(p.c)(["getRoomName","getChatMessages","getTypedMessage"]),{canSend:function(){return this.getTypedMessage.replace(/(^\s*) | (\s*$)/gi,"")}}),data:function(){return{placeholder:"Type something to send..."}},methods:{fetchChatData:function(e){this.$store.dispatch("fetchChatData",e)},typing:function(e){this.$store.commit("UPDATE_TYPED_TEXT",e.target.value)},sendText:function(){this.canSend&&this.$store.dispatch("sendMessage",this.id)},autoScroll:function(){this.$refs.contents.scrollTop=this.$refs.contents.scrollHeight}}},x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-room-page page flex-container flex-column flex-between-sort"},[s("div",{staticClass:"room-header__section flex-container flex-row flex-between-sort"},[s("div",{staticClass:"back-button-wrap flex-container flex-center-sort"},[s("router-link",{staticClass:"back-button",attrs:{to:{name:"ChatList"},tag:"button"}},[e._v("\n        뒤로\n      ")])],1),e._v(" "),s("div",{staticClass:"room-title"},[e._v("\n      "+e._s(e.getRoomName)+"\n    ")]),e._v(" "),s("div",{staticClass:"blank"})]),e._v(" "),s("div",{ref:"contents",staticClass:"room-contents__section"},e._l(e.getChatMessages,function(e,t){return s("chat-message",{key:t,attrs:{"message-data":e}})})),e._v(" "),s("div",{staticClass:"room-send-box__section flex-container flex-row flex-between-sort"},[s("label",{attrs:{for:"input-area"}},[s("input",{attrs:{id:"input-area",type:"text",placeholder:e.placeholder},domProps:{value:e.getTypedMessage},on:{input:e.typing,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.sendText(t):null}}})]),e._v(" "),s("div",{staticClass:"send-button-wrap flex-container flex-center-sort"},[s("button",{staticClass:"send-button",class:{abled:e.canSend,disabled:!e.canSend},attrs:{disabled:!e.canSend},on:{click:e.sendText}},[e._v("보내기")])])])])},staticRenderFns:[]},w=s("VU/8")(P,x,!1,null,null,null).exports;a.a.use(g.a);var y,b=new g.a({routes:[{path:"/",name:"ChatList",component:C},{path:"/room/:id",name:"ChatRoom",component:w,props:!0,beforeEnter:function(e,t,s){e.params.room?s():s({name:"ChatList"})}},{path:"*",redirect:"/"}]}),D={id:99,username:"지그재그",imagePath:"https://pbs.twimg.com/profile_images/781723975747448836/9RQbatqK_400x400.jpg"},R=[{id:1,username:"임블리",currentMessage:"지그재그 앱을 까시면 할인쿠폰을 드립니다!",currentTimestamp:"1543104000000",imagePath:"https://cf.shop.s.zigzag.kr/images/imvely.jpg"},{id:2,username:"미아마스빈",currentMessage:"미아마스빈, 러블리 여성의류, 자체제작 쇼핑몰, 롱원피스, 블라우스, 청바지 등 판매.",currentTimestamp:"1534291200000",imagePath:"https://cf.shop.s.zigzag.kr/images/miamasvin.jpg"},{id:3,username:"모코블링",currentMessage:"모코블링, 당신의 옷. 평범함 속에 특별함이 되다.",currentTimestamp:"1529612000000",imagePath:"https://cf.shop.s.zigzag.kr/images/mocobling.jpg"},{id:4,username:"데일리먼데이",currentMessage:"기본에 충실한 감각적인 스타일을 선도하고 지향하는 데일리먼데이입니다.",currentTimestamp:"1523230000000",imagePath:"https://cf.shop.s.zigzag.kr/images/dailymonday.jpg"},{id:5,username:"파티수",currentMessage:"지그재그앱을 까시면 할인쿠폰을 드립니다!",currentTimestamp:"1522454400000",imagePath:"https://cf.shop.s.zigzag.kr/images/partysu.jpg"},{id:6,username:"하나언니",currentMessage:"스타일메이커 하나언니, 20,30대 여성의류 쇼핑몰, 맨투맨, 팬츠, 슬랙스, 원피스 등 판매.",currentTimestamp:"1517270200000",imagePath:"https://cf.shop.s.zigzag.kr/images/hanaunni.jpg"},{id:7,username:"육육걸즈",currentMessage:"자신감을 입자, 육육걸즈^^!!!",currentTimestamp:"1526083200000",imagePath:"https://cf.shop.s.zigzag.kr/images/66girls.jpg"},{id:8,username:"핫핑",currentMessage:"예쁜것도 모자라 따뜻하기까지한 핫핑메이드 마법팬츠! 군살제로 슬림핏 일자 청바지에 기모를 더해 찬바람따위 문제없어!",currentTimestamp:"1503619200000",imagePath:"https://cf.shop.s.zigzag.kr/images/hotping.jpg"}],k=[{id:1,userId:1,type:"single",roomName:"임블리",messages:[{id:1,isMe:!1,created_at:"1543100000000",message:"안녕하세요. 임블리입니다."},{id:2,isMe:!0,created_at:"1543102000000",message:"반갑습니다. 지그재그입니다."},{id:3,isMe:!1,created_at:"1543104000000",message:"지그재그 앱을 까시면 할인쿠폰을 드립니다!"}]},{id:2,userId:2,type:"single",roomName:"미아마스빈",messages:[{id:1,isMe:!1,created_at:"1534291000000",message:"안녕하세요 미아마스빈입니다."},{id:2,isMe:!0,created_at:"1534291100000",message:"안녕하세요. 지그재그입니다."},{id:3,isMe:!1,created_at:"1534291200000",message:"미아마스빈, 러블리 여성의류, 자체제작 쇼핑몰, 롱원피스, 블라우스, 청바지 등 판매."}]},{id:3,userId:3,type:"single",roomName:"모코블링",messages:[{id:1,isMe:!1,created_at:"1529592000000",message:"안녕하세요. 모코블링입니다."},{id:2,isMe:!0,created_at:"1529602000000",message:"반갑습니다. 지그재그입니다."},{id:3,isMe:!1,created_at:"1529612000000",message:"모코블링, 당신의 옷. 평범함 속에 특별함이 되다."}]},{id:4,userId:4,type:"single",roomName:"데일리먼데이",messages:[{id:1,isMe:!1,created_at:"1523030000000",message:"안녕하세요. 데일리먼데이입니다."},{id:2,isMe:!0,created_at:"1523130000000",message:"반갑습니다. 지그재그입니다."},{id:3,isMe:!1,created_at:"1523230000000",message:"기본에 충실한 감각적인 스타일을 선도하고 지향하는 데일리먼데이입니다."}]},{id:5,userId:5,type:"single",roomName:"파티수",messages:[{id:1,isMe:!1,created_at:"1522452400000",message:"안녕하세요. 파티수입니다."},{id:2,isMe:!0,created_at:"1522454200000",message:"반갑습니다. 지그재그입니다."},{id:3,isMe:!1,created_at:"1522454400000",message:"지그재그앱을 까시면 할인쿠폰을 드립니다!"}]},{id:6,userId:6,type:"single",roomName:"하나언니",messages:[{id:1,isMe:!1,created_at:"1517270000000",message:"안녕하세요. 하나언니입니다."},{id:2,isMe:!0,created_at:"1517270100000",message:"반갑습니다. 지그재그입니다."},{id:3,isMe:!1,created_at:"1517270200000",message:"스타일메이커 하나언니, 20,30대 여성의류 쇼핑몰, 맨투맨, 팬츠, 슬랙스, 원피스 등 판매."}]},{id:7,userId:7,type:"single",roomName:"육육걸즈",messages:[{id:1,isMe:!1,created_at:"1526082200000",message:"안녕하세요. 육육걸즈입니다."},{id:2,isMe:!0,created_at:"1526083100000",message:"반갑습니다. 지그재그입니다."},{id:3,isMe:!1,created_at:"1526083600000",message:"자신감을 입자, 육육걸즈^^!!!"}]},{id:8,userId:8,type:"single",roomName:"핫핑",messages:[{id:1,isMe:!1,created_at:"1503617200000",message:"안녕하세요. 핫핑입니다."},{id:2,isMe:!0,created_at:"1503618200000",message:"반갑습니다. 지그재그입니다."},{id:3,isMe:!1,created_at:"1503619200000",message:"예쁜것도 모자라 따뜻하기까지한 핫핑메이드 마법팬츠! 군살제로 슬림핏 일자 청바지에 기모를 더해 찬바람따위 문제없어!"}]}],F=()=>D,I=()=>R,A=e=>k.find(t=>t.userId===e),L=e=>R.find(t=>t.id===e).imagePath,N=(e,t)=>{const s=t;if(!s.id&&!s.created_at){const t=k.find(t=>t.userId===e).messages.length+1,a=(new Date).getTime();s.id=t,s.created_at=a}k.find(t=>t.userId===e).messages.push(s);const a=R.find(t=>t.id===e);a.currentMessage=s.message,a.currentTimestamp=s.created_at},O={fetchUserData:function(e){(0,e.commit)("FETCH_MY_PROFILE",F().imagePath)},fetchFriendList:function(e){var t=e.commit,s=I();t("FETCH_FRIEND_LIST",s),s.sort(function(e,t){var s=parseInt(e.currentTimestamp,10),a=parseInt(t.currentTimestamp,10);return s>a?-1:s<a?1:0})},fetchChatData:function(e,t){var s=e.commit,a=A(t),i=L(t);a&&i?(s("FETCH_CHAT_DATA",a),s("FETCH_OTHER_PROFILE",i)):(s("FETCH_CHAT_DATA",{}),s("FETCH_OTHER_PROFILE","https://pbs.twimg.com/profile_images/781723975747448836/9RQbatqK_400x400.jpg"))},sendMessage:function(e,t){var s=e.commit,a=e.state;s("CREATE_MESSAGE_TOKEN"),N(t,a.messageToken),s("CLEAR_TEXT_INPUT_AREA")}},H=s("bOdI"),j=s.n(H),z=(y={},j()(y,"FETCH_FRIEND_LIST",function(e,t){e.friendList=t}),j()(y,"FETCH_CHAT_DATA",function(e,t){e.chatData=t}),j()(y,"FETCH_MY_PROFILE",function(e,t){e.myProfilePath=t}),j()(y,"FETCH_OTHER_PROFILE",function(e,t){e.otherProfilePath=t}),j()(y,"UPDATE_TYPED_TEXT",function(e,t){e.typedMessage=t}),j()(y,"CLEAR_TEXT_INPUT_AREA",function(e){e.typedMessage=""}),j()(y,"CREATE_MESSAGE_TOKEN",function(e){e.messageToken={isMe:!0,message:e.typedMessage}}),y);a.a.use(p.a);var S=new p.a.Store({state:{friendList:[],chatData:{},myProfilePath:"",otherProfilePath:"",typedMessage:"",messageToken:{}},mutations:z,getters:{getFriendLists:function(e){return e.friendList},getChatMessages:function(e){return e.chatData.messages},getRoomName:function(e){return e.chatData.roomName},getTypedMessage:function(e){return e.typedMessage},getOtherProfilePath:function(e){return e.otherProfilePath},getMyProfilePath:function(e){return e.myProfilePath}},actions:O});a.a.config.productionTip=!1,new a.a({el:"#app",router:b,components:{App:d},template:"<App/>",store:S})}},["NHnr"]);
//# sourceMappingURL=app.4d074ab64067a9d46906.js.map